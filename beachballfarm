local function getClosestCoin()
	local hrp = Players.LocalPlayer.Character and Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
	if not hrp then return nil end

	local closestCoin, shortestDist = nil, math.huge

	for _, obj in ipairs(workspace:GetDescendants()) do
		if obj:IsA("BasePart") and obj.Name == "Coin_Server" then
			local dist = (hrp.Position - obj.Position).Magnitude
			if dist < shortestDist then
				shortestDist = dist
				closestCoin = obj
			end
		end
	end

	return closestCoin
end

local function tweenTo(position)
	local hrp = Players.LocalPlayer.Character and Players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
	if not hrp then return end

	local distance = (hrp.Position - position).Magnitude
	local time = math.clamp(distance / 50, 0.3, 1) -- Чем ближе монета, тем быстрее; но не менее 0.3с
	local tween = TweenService:Create(hrp, TweenInfo.new(time, Enum.EasingStyle.Linear), {CFrame = CFrame.new(position)})
	tween:Play()
	tween.Completed:Wait()
end

function coinFarm()
	while getgenv().coinFarm == true do
		local coin = getClosestCoin()
		if coin then
			tweenTo(coin.Position + Vector3.new(0, 3, 0)) -- немного выше монеты
		else
			task.wait(0.5)
		end
	end
end
