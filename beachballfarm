if game.PlaceId == 142823291 then
    local Players = game:GetService("Players")
    local TweenService = game:GetService("TweenService")
    local CoreGui = game:GetService("CoreGui")
    local UserInputService = game:GetService("UserInputService")
    local lp = Players.LocalPlayer

    getgenv().coinFarm = false
    local tweenSpeed = 0.6 -- быстрее = меньше время (например, 0.5), но не слишком мало
    local maxCoinDistance = 300 -- радиус поиска монет

    -- === GUI ===
    local gui = Instance.new("ScreenGui", CoreGui)
    gui.Name = "CoinFarmGUI"
    gui.ResetOnSpawn = false

    local frame = Instance.new("Frame", gui)
    frame.Size = UDim2.new(0, 150, 0, 50)
    frame.Position = UDim2.new(0, 100, 0, 100)
    frame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
    frame.Active = true
    frame.Draggable = true
    Instance.new("UICorner", frame).CornerRadius = UDim.new(0, 10)

    local button = Instance.new("TextButton", frame)
    button.Size = UDim2.new(1, -10, 1, -10)
    button.Position = UDim2.new(0, 5, 0, 5)
    button.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    button.TextColor3 = Color3.new(1, 1, 1)
    button.Text = "AutoFarm: OFF"
    button.Font = Enum.Font.GothamBold
    button.TextSize = 14
    Instance.new("UICorner", button).CornerRadius = UDim.new(0, 8)

    -- === Логика монет ===
    local function isValidCoin(part)
        return part:IsA("Part") and part.Name == "Coin_Server" and part:IsDescendantOf(workspace)
    end

    local function getClosestCoin()
        local char = lp.Character
        if not char or not char:FindFirstChild("HumanoidRootPart") then return nil end
        local hrp = char.HumanoidRootPart

        local closestCoin = nil
        local closestDist = maxCoinDistance

        for _, coin in ipairs(workspace:GetDescendants()) do
            if isValidCoin(coin) then
                local dist = (coin.Position - hrp.Position).Magnitude
                if dist < closestDist then
                    closestDist = dist
                    closestCoin = coin
                end
            end
        end

        return closestCoin
    end

    local function tweenTo(position)
        local char = lp.Character
        if not char or not char:FindFirstChild("HumanoidRootPart") then return end
        local hrp = char.HumanoidRootPart
        local goal = {CFrame = CFrame.new(position)}
        local info = TweenInfo.new(tweenSpeed, Enum.EasingStyle.Linear)
        local tween = TweenService:Create(hrp, info, goal)
        tween:Play()
        tween.Completed:Wait()
    end

    local function farmLoop()
        while getgenv().coinFarm do
            local coin = getClosestCoin()
            if coin then
                tweenTo(coin.Position + Vector3.new(0, 2, 0))
                task.wait(0.05)
            else
                task.wait(0.3)
            end
        end
    end

    -- === Переключение кнопки ===
    button.MouseButton1Click:Connect(function()
        getgenv().coinFarm = not getgenv().coinFarm
        if getgenv().coinFarm then
            button.Text = "AutoFarm: ON"
            button.BackgroundColor3 = Color3.fromRGB(50, 120, 50)
            task.spawn(farmLoop)
        else
            button.Text = "AutoFarm: OFF"
            button.BackgroundColor3 = Color3.fromRGB(120, 50, 50)
        end
    end)
end
